<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar - White Eagles</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="calendar-page">
    <div class="page-side page-side-left" aria-hidden="true"></div>
    <div class="page-side page-side-right" aria-hidden="true"></div>
    <header class="header">
        <nav class="nav">
            <a href="index.html" class="logo">
                <img src="assets/logo/logo.png" alt="White Eagles" class="logo-img">
                <span class="logo-text">White Eagles</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="programs.html">Programs</a></li>
                <li><a href="volunteer.html">Volunteer</a></li>
                <li><a href="about-us.html">About Us</a></li>
                <li><a href="https://calgaryminorsoccer.ottosport.ai/league/league-rules" target="_blank" rel="noopener noreferrer">Rules &amp; Regulations</a></li>
                <li><a href="calendar.html">Calendar</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>
    </header>

    <main>
        <section class="page-header">
            <h1>Calendar</h1>
            <p>Practices, games, and club events.</p>
        </section>

        <section class="content">
            <div class="calendar-wrap">
                <p class="calendar-intro">Practices, games, and club events. Switch calendars below.</p>
                <div class="calendar-switcher" role="tablist" aria-label="Choose calendar" id="calendar-tabs"></div>
                <div class="calendar-embed" aria-label="Google Calendar">
                    <iframe
                        id="calendar-iframe"
                        title="White Eagles calendar"
                        width="100%"
                        height="600"
                        frameborder="0"
                        scrolling="no"
                        style="border: 0">
                    </iframe>
                </div>
                <p class="calendar-note" id="calendar-note">Switch between the calendars using the tabs above.</p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p id="footer-copy"></p>
    </footer>

    <script src="site-config.js"></script>
    <script src="script.js"></script>
    <script>
        (function() {
            // Calendar list is loaded from site-config.js â€“ edit that file to add/remove calendars.
            var calendarList = (window.SITE_CONFIG && window.SITE_CONFIG.calendarList) || [];

            // Embed URL format must match Google: ?src=ID&ctz=America%2FEdmonton (same as your iframe)
            function calendarEmbedUrl(calId) {
                return 'https://calendar.google.com/calendar/embed?src=' + calId + '&ctz=America%2FEdmonton';
            }
            var tabsEl = document.getElementById('calendar-tabs');
            var iframe = document.getElementById('calendar-iframe');

            if (!tabsEl || !iframe || calendarList.length === 0) return;

            calendarList.forEach(function(cal, index) {
                var btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'calendar-tab' + (index === 0 ? ' active' : '');
                btn.setAttribute('data-calendar-index', index);
                btn.setAttribute('aria-selected', index === 0 ? 'true' : 'false');
                btn.textContent = cal.name;
                tabsEl.appendChild(btn);
            });

            if (iframe) iframe.src = calendarEmbedUrl(calendarList[0].id);

            tabsEl.addEventListener('click', function(e) {
                var btn = e.target.closest('.calendar-tab');
                if (!btn) return;
                var index = parseInt(btn.getAttribute('data-calendar-index'), 10);
                if (isNaN(index) || !calendarList[index]) return;
                tabsEl.querySelectorAll('.calendar-tab').forEach(function(b) { b.classList.remove('active'); b.setAttribute('aria-selected', 'false'); });
                btn.classList.add('active'); btn.setAttribute('aria-selected', 'true');
                iframe.src = calendarEmbedUrl(calendarList[index].id);
            });
        })();
    </script>
</body>
</html>
